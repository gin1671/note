<!doctype html> <html> <head> <meta charset=utf-8 /> <meta http-equiv=X-UA-Compatible content='ie=edge'/> <meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no"/> <title>Blog Title - gem導入や初期設定など</title> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/feed.xml"/> <link href="/note/assets/stylesheets/app-524c795c.css" rel=stylesheet /> <script src="/note/assets/javascripts/app-eaf002be.js"></script> </head> <body> <div id=main role=main> <nav class="navbar navbar-expand-lg navbar-light bg-light"> <a class=navbar-brand href="/note/">ねこの手システム</a> <button class=navbar-toggler type=button data-toggle=collapse data-target="#navbarNav" aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> <div class="collapse navbar-collapse" id=navbarNav> <ul class=navbar-nav> <li class=nav-item> <a class="nav-link active" href="/note/">トップページ</a> </li> <li class=nav-item> <a class=nav-link href="/note/note.html">開発ノート</a> </li> </ul> </div> </nav> <div class="container article-outside-container"> <div class=row> <div class="col-md-8 blog-main"> <h3> gem導入や初期設定など </h3> <hr> <h2>主な作業内容</h2> <ul> <li>Twitterログインできるか試す→失敗 <ul> <li>モデルの作成、設定</li> <li>コントローラーの設定、追加</li> <li>ログインするためのindexページを仮作成</li> </ul></li> </ul> <h2>困ったところ</h2> <pre><code>% bundle exec rails g model User
1: from /Users/cs/OneDrive/projects/trust/tweet-reader/vendor/bundle/ruby/2.6.0/gems/bootsnap-1.4.6/lib/bootsnap/load_path_cache/core_ext/active_support.rb:17:in `allow_bootsnap_retry&#39;
/Users/cs/OneDrive/projects/trust/tweet-reader/vendor/bundle/ruby/2.6.0/gems/bootsnap-1.4.6/lib/bootsnap/load_path_cache/core_ext/active_support.rb:61:in `block in load_missing_constant&#39;: uninitialized constant OmniAuth (NameError)
1: from /Users/cs/OneDrive/projects/trust/tweet-reader/vendor/bundle/ruby/2.6.0/gems/bootsnap-1.4.6/lib/bootsnap/load_path_cache/core_ext/active_support.rb:9:in `without_bootsnap_cache&#39;
/Users/cs/OneDrive/projects/trust/tweet-reader/vendor/bundle/ruby/2.6.0/gems/bootsnap-1.4.6/lib/bootsnap/load_path_cache/core_ext/active_support.rb:80:in `block in load_missing_constant&#39;: uninitialized constant OmniAuth (NameError)
</code></pre> <p>config/initializers/omniauth.rb rails s でも同じエラーが出た。このファイルは認証に必要なため新規作成したが、どこかでネームエラーが出てるっぽい。今は初期設定なのでとりあえず後回し。以下をコメントアウトしたら通った。 ```</p> <h1>Rails.application.config.middleware.use OmniAuth::Builder do</h1> <h1>provider :twitter, ENV[&#39;TWITTER<em>CONSUMER</em>KEY&#39;], ENV[&#39;TWITTER<em>SECRET</em>KEY&#39;]</h1> <h1>end</h1> <pre><code>
先にモデルを作成することにする。うまくいった。

</code></pre> <p>% bundle exec rails g model User provider:string uid:string nickname:string name:string image<em>url:string description:string invoke active</em>record create db/migrate/20200713053508<em>create</em>users.rb create app/models/user.rb invoke rspec create spec/models/user<em>spec.rb invoke factory</em>bot create spec/factories/users.rb</p> <p>% bundle exec rails db:migrate == 20200713053508 CreateUsers: migrating ====================================== -- create_table(:users) -&gt; 0.0435s == 20200713053508 CreateUsers: migrated (0.0435s) ============================= ```</p> <p>初期設定後（#7）、白紙のindexページはローカル環境で表示されたが、リロードする度にターミナルでは以下のようなエラーが発生する。 <code> % bundle exec rails s ActionController::RoutingError (No route matches [GET] &quot;/serviceworker.js&quot;): </code></p> <p>config/routes.rbの設定は以下のみ。「serviceworker」というものをプロジェクトディレクトリ内で全検索をかけてみたが、ファイルや記述などは見当たらない。 ```</p> <h1>Rails.application.config.middleware.use OmniAuth::Builder do</h1> <h1>provider :twitter, ENV[&#39;TWITTER<em>CONSUMER</em>KEY&#39;], ENV[&#39;TWITTER<em>SECRET</em>KEY&#39;]</h1> <h1>end</h1> <pre><code>
</code></pre> <p>% rails routes Prefix Verb URI Pattern Controller#Action root GET / tweet<em>readers#index rails</em>service<em>blob GET /rails/active</em>storage/blobs/:signed<em>id/*filename(.:format) active</em>storage/blobs#show rails<em>blob</em>representation GET /rails/active<em>storage/representations/:signed</em>blob<em>id/:variation</em>key/<em>filename(.:format) active<em>storage/representations#show rails</em>disk<em>service GET /rails/active</em>storage/disk/:encoded_key/</em>filename(.:format) active<em>storage/disk#show update</em>rails<em>disk</em>service PUT /rails/active<em>storage/disk/:encoded</em>token(.:format) active<em>storage/disk#update rails</em>direct<em>uploads POST /rails/active</em>storage/direct<em>uploads(.:format) active</em>storage/direct_uploads#create ```</p> <p>locateで全検索。ヒットしたが、globalのrubyバージョン2.5なので関係なさそう。今回使っているのは2.6.6。 必要なのにないからエラーが出ている？消した覚えはないが…。とりあえず後回しにして進めてみたが、エラー解決せず。</p> <p>gemが色々あるので、もっと調査する必要がありそう。</p> <h3>学び</h3> <p>今まで使ってきたことのあるgemはruby2.6環境下での依存関係を調べ直す必要がありそう。</p> </div> <aside class="col-md-4 blog-sidebar"> <div class="p-3 mb-3 bg-light rounded"> <h4 class=font-italic>Rails開発ノート</h4> <p class=mb-0> 日々学んだことや開発過程の記録場所。 </p> </div> <div class=p-3> <h4 class=font-italic>最新投稿</h4> <ol class=list-unstyled> <li> <span>2020/07/13</span> <a href="/note/2020/07/13/post.html">gem導入や初期設定など</a> </li> <li> <span>2020/07/10</span> <a href="/note/2020/07/10/post.html">gem導入や初期設定など2</a> </li> <li> <span>2020/07/09</span> <a href="/note/2020/07/09/post.html">gem導入や初期設定など</a> </li> <li> <span>2020/07/07</span> <a href="/note/2020/07/07/post.html">環境構築3</a> </li> <li> <span>2020/07/06</span> <a href="/note/2020/07/06/post.html">環境構築2</a> </li> <li> <span>2020/07/03</span> <a href="/note/2020/07/03/post.html">環境構築</a> </li> <li> <span>2020/07/02</span> <a href="/note/2020/07/02/post.html">ミニマムリリースを目指す</a> </li> <li> <span>2020/07/01</span> <a href="/note/2020/07/01/post.html">TweetReaderサービス構想</a> </li> </ol> </div> <div class=p-3> <h4 class=font-italic>タグ</h4> <ol class=list-unstyled> <li> <a href="/note/tags/tr-v0-0-1.html">TR_v0.0.1 (8)</a> </li> </ol> </div> <div class=p-3> <h4 class=font-italic>年別</h4> <ol class=list-unstyled> <li> <a href="/note/2020.html">2020 (8)</a> </li> </ol> </div> </aside> </div> </div> <footer class=my-footer> <p></p> </footer> </div> </body> </html>